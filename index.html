<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ra√≠ces que se cuentan | Travel Tech Ecosystem</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css" rel="stylesheet">
    <script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #0a111f; --accent: #d4af37; --bg: #f4f7f9;
            --white: #ffffff; --glass: rgba(255,255,255,0.96);
            --shadow: 0 15px 35px rgba(0,0,0,0.08);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; transition: all 0.3s ease; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--primary); }

        /* NAVEGACI√ìN */
        header {
            background: var(--glass); backdrop-filter: blur(15px);
            position: fixed; top: 0; width: 100%; z-index: 2000;
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.04);
        }
        .logo { font-family: 'Playfair Display', serif; font-size: 1.5rem; font-weight: 900; letter-spacing: -1px; }
        nav { display: flex; gap: 20px; }
        nav a { text-decoration: none; color: var(--primary); font-size: 0.75rem; font-weight: 700; cursor: pointer; text-transform: uppercase; }
        nav a:hover { color: var(--accent); }

        /* SECCIONES */
        section { display: none; padding: 110px 5% 60px; min-height: 100vh; }
        section.active { display: block; animation: fadeInUp 0.6s ease; }
        @keyframes fadeInUp { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }

        .card { background: var(--white); border-radius: 25px; padding: 30px; box-shadow: var(--shadow); margin-bottom: 25px; }

        /* EXPLORAR */
        .grid-plan { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 15px; }
        select, input, textarea { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #e2e8f0; font-family: inherit; outline: none; }
        .btn-gold { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 12px; font-weight: 800; cursor: pointer; width: 100%; }
        .btn-gold:hover { background: var(--accent); transform: translateY(-2px); }
        #map { width: 100%; height: 450px; border-radius: 25px; border: 8px solid white; box-shadow: var(--shadow); }

        /* ITINERARIO (RESE√ëAS) */
        .star-box i { font-size: 1.5rem; color: #cbd5e1; cursor: pointer; margin-right: 5px; }
        .star-box i.active { color: var(--accent); }
        .badge { font-size: 0.65rem; padding: 5px 12px; border-radius: 20px; font-weight: 800; text-transform: uppercase; }
        .badge-pub { background: #e8f5e9; color: #2e7d32; }
        .badge-priv { background: #f1f5f9; color: #475569; }

        /* GASTOS */
        .expense-hero { background: var(--primary); color: white; padding: 50px; border-radius: 35px; text-align: center; margin-bottom: 30px; }
        .currency-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-top: 25px; }
        .curr-item { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; }

        /* NOSOTROS & L√çNEA DE TIEMPO */
        .timeline { position: relative; max-width: 800px; margin: 40px auto; padding: 20px 0; }
        .timeline::after { content: ''; position: absolute; width: 4px; background: var(--accent); top: 0; bottom: 0; left: 50%; margin-left: -2px; }
        .tl-item { padding: 10px 40px; position: relative; width: 50%; }
        .tl-left { left: 0; text-align: right; }
        .tl-right { left: 50%; }
        .tl-item::after { content: ''; position: absolute; width: 18px; height: 18px; background: white; border: 4px solid var(--accent); top: 15px; border-radius: 50%; z-index: 1; }
        .tl-left::after { right: -11px; }
        .tl-right::after { left: -11px; }

        /* CONTACTO */
        .contact-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .social-btn { display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8fafc; border-radius: 15px; text-decoration: none; color: var(--primary); font-weight: 700; margin-bottom: 10px; border: 1px solid #eee; }
        .social-btn:hover { border-color: var(--accent); background: white; }

        /* RINKU BOT */
        #rinku-bot { position: fixed; bottom: 25px; right: 25px; z-index: 5000; }
        .rinku-icon { width: 85px; cursor: pointer; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1)); }
        .rinku-chat { display: none; position: absolute; bottom: 95px; right: 0; width: 320px; background: white; border-radius: 25px; padding: 20px; box-shadow: var(--shadow); border: 2px solid var(--accent); }
        .chat-body { max-height: 300px; overflow-y: auto; font-size: 0.85rem; line-height: 1.5; color: #444; }
    </style>
</head>
<body>

<header>
    <div class="logo">Ra√≠ces que se cuentan</div>
    <nav>
        <a onclick="show('explorar')">Explorar</a>
        <a onclick="show('itinerario')">Itinerario</a>
        <a onclick="show('gastos')">Gastos</a>
        <a onclick="show('nosotros')">Nosotros</a>
        <a onclick="show('contacto')">Contacto</a>
    </nav>
</header>

<section id="explorar" class="active">
    <div class="card">
        <h2 style="font-family:'Playfair Display'; margin-bottom:20px;">Nueva Planificaci√≥n</h2>
        <div class="grid-plan">
            <select id="pSel" onchange="loadProv()"><option value="">Selecciona Pa√≠s</option></select>
            <select id="prSel" onchange="loadDist()"><option value="">Provincia</option></select>
            <select id="dSel"><option value="">Distrito</option></select>
        </div>
        <div class="grid-plan">
            <input type="date" id="tDate">
            <input type="number" id="tDays" placeholder="D√≠as de estancia">
            <select id="tAir">
                <option value="">Aerol√≠nea</option>
                <option>LATAM</option><option>Iberia</option><option>Sky</option><option>Aerol√≠neas Argentinas</option>
            </select>
        </div>
        <div class="grid-plan">
            <input type="number" id="tPax" placeholder="Personas">
            <select id="tReason">
                <option value="">Motivo del viaje</option>
                <option>Turismo</option><option>Trabajo</option><option>Evento</option><option>Beca</option>
            </select>
        </div>
        <button class="btn-gold" onclick="saveNewTrip()">GUARDAR PLAN Y MARCAR PIN DORADO</button>
    </div>
    
    <div class="card" id="infoPanel" style="display:none;">
        <h4 id="infoTitle" style="margin-bottom:15px; color:var(--accent);">Gu√≠a del Pa√≠s</h4>
        <div class="grid-plan" style="grid-template-columns: repeat(3, 1fr);">
            <button class="btn-gold" style="font-size:0.6rem;" onclick="rinkuInfo('historia')">Historia</button>
            <button class="btn-gold" style="font-size:0.6rem;" onclick="rinkuInfo('arquitectura')">Arquitectura</button>
            <button class="btn-gold" style="font-size:0.6rem;" onclick="rinkuInfo('requisitos')">Requisitos</button>
        </div>
    </div>

    <div id="map"></div>
</section>

<section id="itinerario">
    <h1 style="font-family:'Playfair Display'; margin-bottom:25px;">Bit√°coras de Viaje</h1>
    <div id="itinList"></div>
</section>

<section id="gastos">
    <div class="expense-hero">
        <p style="font-size:0.8rem; letter-spacing:2px; opacity:0.8;">PRESUPUESTO CONSOLIDADO</p>
        <h2 id="totalUSD" style="font-size:3.5rem; font-family:'Playfair Display';">$ 0.00</h2>
        <div class="currency-grid">
            <div class="curr-item"><small>SOLES (PEN)</small><br><b id="v-pen">0</b></div>
            <div class="curr-item"><small>P. ARG (ARS)</small><br><b id="v-ars">0</b></div>
            <div class="curr-item"><small>P. CHI (CLP)</small><br><b id="v-clp">0</b></div>
            <div class="curr-item"><small>EURO (EUR)</small><br><b id="v-eur">0</b></div>
        </div>
    </div>
    <div class="card">
        <h3>Registrar Gasto Espec√≠fico</h3>
        <select id="expenseSelect" style="margin-top:10px;"></select>
        <input type="number" id="expenseAmt" placeholder="Monto en USD" style="margin-top:10px;">
        <button class="btn-gold" style="margin-top:10px;" onclick="addExpense()">Cargar Gasto</button>
    </div>
</section>

<section id="nosotros">
    <div class="card" style="text-align:center;">
        <h1 style="font-family:'Playfair Display'; font-size:3rem;">Ra√≠ces que se cuentan</h1>
        <p style="margin-top:20px; color:#555; line-height:1.7;">Somos una Startup de tecnolog√≠a cultural que permite a los usuarios mapear su historia personal y colectiva.</p>
    </div>
    
    <div class="timeline">
        <div class="tl-item tl-left"><div class="card"><h4>2023: Inicios</h4><p>Nace la visi√≥n en Puno, Per√∫.</p></div></div>
        <div class="tl-item tl-right"><div class="card"><h4>2024: Prototipo</h4><p>Lanzamiento del mapa geogr√°fico.</p></div></div>
        <div class="tl-item tl-left"><div class="card"><h4>2025: IA Rinku</h4><p>Automatizaci√≥n de itinerarios.</p></div></div>
        <div class="tl-item tl-right"><div class="card"><h4>2026: Global</h4><p>Red de rese√±as p√∫blicas mundial.</p></div></div>
    </div>
</section>

<section id="contacto">
    <div class="contact-grid">
        <div class="card">
            <h3>Cont√°ctanos</h3>
            <p style="font-size:0.9rem; margin-bottom:15px;">raicesquesecuentan323@gmail.com</p>
            <input type="text" placeholder="Nombre" style="margin-bottom:10px;">
            <textarea placeholder="¬øEn qu√© podemos ayudarte?" style="height:120px; margin-bottom:10px;"></textarea>
            <button class="btn-gold">Enviar Mensaje</button>
        </div>
        <div>
            <h3>Nuestra Comunidad</h3>
            <a href="#" class="social-btn"><i class="fa-brands fa-instagram" style="color:#E1306C"></i> Instagram</a>
            <a href="#" class="social-btn"><i class="fa-brands fa-tiktok"></i> TikTok</a>
            <a href="#" class="social-btn"><i class="fa-brands fa-whatsapp" style="color:#25D366"></i> Canal de Difusi√≥n</a>
        </div>
    </div>
</section>

<div id="rinku-bot">
    <div class="rinku-chat" id="rinkuChat">
        <h4 style="margin-bottom:10px;">Rinku AI üêí</h4>
        <div id="chatContent" class="chat-body">
            ¬°Hola! Soy Rinku. Preg√∫ntame una ruta (ej: "Mendoza a Santiago") y te dar√© un itinerario sugerido.
        </div>
        <input type="text" id="chatInput" placeholder="Escribe tu ruta..." style="margin-top:10px; padding:10px; font-size:0.8rem;">
        <button class="btn-gold" style="margin-top:5px; padding:8px;" onclick="rinkuAsk()">Consultar</button>
    </div>
    <img src="https://img.icons8.com/clouds/100/monkey.png" class="rinku-icon" onclick="toggleRinku()">
</div>

<script>
    const db = {
        "Per√∫": { prov: { "Lima": ["Miraflores", "Barranco"], "Cusco": ["Urubamba"] }, historia: "Cuna del Imperio Inca.", arquitectura: "Mezcla Colonial e Inca.", requisitos: "DNI o Pasaporte." },
        "Chile": { prov: { "Santiago": ["Providencia"] }, historia: "Tierra de contrastes.", arquitectura: "Moderna y Neocl√°sica.", requisitos: "Visa seg√∫n pa√≠s." },
        "Argentina": { prov: { "Mendoza": ["Chacras de Coria"] }, historia: "Tierra del sol y el buen vino.", arquitectura: "Europea cl√°sica.", requisitos: "DNI Mercosur." }
    };

    const TASAS = { PEN: 3.82, ARS: 860, CLP: 950, EUR: 0.92 };
    let myTrips = [];

    function show(id) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(id === 'explorar') map.resize();
    }

    const map = new maplibregl.Map({ container: 'map', style: 'https://demotiles.maplibre.org/style.json', center: [-75, -15], zoom: 3 });

    const pS = document.getElementById('pSel');
    for(let p in db) pS.innerHTML += `<option value="${p}">${p}</option>`;

    function loadProv() {
        const pr = document.getElementById('prSel'); pr.innerHTML = '<option value="">Provincia</option>';
        if(db[pS.value]) {
            for(let x in db[pS.value].prov) pr.innerHTML += `<option value="${x}">${x}</option>`;
            document.getElementById('infoPanel').style.display = 'block';
            document.getElementById('infoTitle').innerText = `Gu√≠a de ${pS.value}`;
        }
    }

    function loadDist() {
        const d = document.getElementById('dSel'); d.innerHTML = '<option value="">Distrito</option>';
        const prov = document.getElementById('prSel').value;
        if(prov) db[pS.value].prov[prov].forEach(x => d.innerHTML += `<option value="${x}">${x}</option>`);
    }

    function saveNewTrip() {
        const t = {
            id: Date.now(),
            dist: document.getElementById('dSel').value,
            pais: pS.value,
            fecha: document.getElementById('tDate').value,
            dias: document.getElementById('tDays').value,
            motivo: document.getElementById('tReason').value,
            pax: document.getElementById('tPax').value,
            stars: 0, review: "", priv: "Privado", gasto: 0, likes: 0
        };
        if(!t.dist) return alert("Completa los datos");
        myTrips.push(t);
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#d4af37', '#0a111f'] });
        
        new maplibregl.Marker({ color: "#d4af37" })
            .setLngLat(map.getCenter())
            .setPopup(new maplibregl.Popup().setHTML(`<b>${t.dist}</b><br>${t.dias} d√≠as | ${t.motivo}`))
            .addTo(map);

        updateItin();
        updateExpSelect();
        alert("¬°Viaje guardado con Pin Dorado!");
    }

    function updateItin() {
        const list = document.getElementById('itinList');
        list.innerHTML = myTrips.map((t, idx) => `
            <div class="card">
                <div style="display:flex; justify-content:space-between;">
                    <span class="badge ${t.priv==='P√∫blico'?'badge-pub':'badge-priv'}">${t.priv}</span>
                    <small>${t.fecha} | ${t.pax} Personas</small>
                </div>
                <h3>${t.dist}, ${t.pais}</h3>
                <p style="font-size:0.8rem; color:#666;">Motivo: ${t.motivo} | Estancia: ${t.dias} d√≠as</p>
                <div class="star-box" style="margin:10px 0;">
                    ${[1,2,3,4,5].map(s => `<i class="fa-solid fa-star ${s <= t.stars?'active':''}" onclick="rate(${idx},${s})"></i>`).join('')}
                </div>
                <textarea id="rev-${idx}" onchange="myTrips[${idx}].review=this.value" placeholder="Rese√±a..." style="height:60px;">${t.review}</textarea>
                <div style="margin-top:10px; display:flex; gap:10px;">
                    <button class="btn-gold" style="font-size:0.6rem; padding:8px;" onclick="setPriv(${idx},'P√∫blico')">Hacer P√∫blico</button>
                    <button class="btn-gold" style="font-size:0.6rem; padding:8px; background:#666;" onclick="setPriv(${idx},'Privado')">Hacer Privado</button>
                </div>
                ${t.priv==='P√∫blico'?`<div style="margin-top:10px; font-size:0.75rem;"><i class="fa-solid fa-thumbs-up"></i> √ötil para la comunidad (${t.likes})</div>`:''}
            </div>
        `).join('');
    }

    function rate(idx, s) { myTrips[idx].stars = s; updateItin(); }
    function setPriv(idx, p) { 
        myTrips[idx].priv = p; 
        if(p==='P√∫blico') myTrips[idx].likes = Math.floor(Math.random()*20);
        updateItin(); 
    }

    function updateExpSelect() {
        const s = document.getElementById('expenseSelect');
        s.innerHTML = myTrips.map(t => `<option value="${t.id}">${t.dist} (${t.fecha})</option>`).join('');
    }

    function addExpense() {
        const id = document.getElementById('expenseSelect').value;
        const amt = parseFloat(document.getElementById('expenseAmt').value);
        const trip = myTrips.find(t => t.id == id);
        if(trip && amt) { 
            trip.gasto += amt; 
            updateTotals(); 
            alert("Gasto registrado");
        }
    }

    function updateTotals() {
        const total = myTrips.reduce((acc, t) => acc + t.gasto, 0);
        document.getElementById('totalUSD').innerText = `$ ${total.toFixed(2)}`;
        document.getElementById('v-pen').innerText = (total * TASAS.PEN).toLocaleString();
        document.getElementById('v-ars').innerText = (total * TASAS.ARS).toLocaleString();
        document.getElementById('v-clp').innerText = (total * TASAS.CLP).toLocaleString();
        document.getElementById('v-eur').innerText = (total * TASAS.EUR).toLocaleString();
    }

    function toggleRinku() {
        const c = document.getElementById('rinkuChat');
        c.style.display = c.style.display === 'block' ? 'none' : 'block';
    }

    function rinkuAsk() {
        const q = document.getElementById('chatInput').value.toLowerCase();
        const content = document.getElementById('chatContent');
        let res = "Rinku: No tengo esa ruta a√∫n, prueba 'Lima a Cusco'.";
        
        if(q.includes("lima") && q.includes("cusco")) {
            res = "Rinku: üêí ¬°Gran ruta! D√≠a 1: Lima hist√≥rica. D√≠a 2: Vuelo a Cusco. D√≠a 3: Machu Picchu v√≠a Urubamba.";
        } else if(q.includes("mendoza") && q.includes("santiago")) {
            res = "Rinku: üêí Cruce de los Andes! D√≠a 1: Bodegas en Mendoza. D√≠a 2: Bus Cruce fronterizo. D√≠a 3: Santiago Sky Costanera.";
        }
        content.innerHTML += `<div style="margin-top:10px; border-top:1px solid #eee; padding-top:5px;"><b>T√∫:</b> ${q}<br><b>Rinku:</b> ${res}</div>`;
        content.scrollTop = content.scrollHeight;
    }

    function rinkuInfo(tipo) {
        const p = pS.value;
        if(!p) return alert("Selecciona un pa√≠s");
        alert(`Rinku dice sobre ${tipo} en ${p}: ${db[p][tipo]}`);
    }
</script>
</body>
</html>
