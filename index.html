<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>RaÃ­ces que se Cuentan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- MapLibre (100% free) -->
<link href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css" rel="stylesheet">
<script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>

<style>
:root{
  --primary:#1b5e20;
  --secondary:#4caf50;
  --dark:#102017;
  --light:#f4f7f4;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: 'Segoe UI', system-ui, sans-serif;
  background:var(--light);
  color:#222;
}
header{
  display:flex;
  align-items:center;
  gap:15px;
  padding:18px 25px;
  background:linear-gradient(135deg,var(--dark),var(--primary));
  color:white;
}
.logo{
  width:48px;
  height:48px;
  background:white;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--primary);
  font-weight:800;
  font-size:18px;
}
header h1{
  margin:0;
  font-size:22px;
}
header span{
  font-size:13px;
  opacity:.85;
}
main{
  max-width:1400px;
  margin:auto;
  padding:20px;
}
.grid{
  display:grid;
  grid-template-columns:1.2fr .8fr;
  gap:20px;
}
@media(max-width:900px){
  .grid{grid-template-columns:1fr}
}
#map{
  height:520px;
  border-radius:18px;
  overflow:hidden;
}
.panel{
  background:white;
  border-radius:18px;
  padding:20px;
  box-shadow:0 8px 20px rgba(0,0,0,.1);
}
.panel h2{
  margin-top:0;
  color:var(--primary);
}
.options{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  margin-top:15px;
}
.option{
  padding:12px;
  border-radius:12px;
  background:var(--light);
  cursor:pointer;
  border:1px solid #ddd;
}
.option:hover{
  background:#e8f5e9;
  border-color:var(--secondary);
}
button{
  width:100%;
  margin-top:15px;
  padding:12px;
  border-radius:12px;
  border:none;
  background:var(--primary);
  color:white;
  font-weight:600;
  cursor:pointer;
}
button:hover{background:#2e7d32}
footer{
  margin-top:30px;
  text-align:center;
  color:#666;
  font-size:13px;
}
</style>
</head>

<body>

<header>
  <div class="logo">ğŸŒ¿</div>
  <div>
    <h1>RaÃ­ces que se Cuentan</h1>
    <span>Explorando historia, cultura y caminos reales</span>
  </div>
</header>

<main>

<div class="grid">

  <!-- MAPA -->
  <div id="map"></div>

  <!-- PANEL -->
  <div class="panel">
    <h2 id="title">Selecciona un destino</h2>
    <p id="desc">Explora el origen, historia y experiencias culturales del lugar.</p>

    <button onclick="usarUbicacion()">ğŸ“ Usar mi ubicaciÃ³n actual</button>
    <button onclick="calcularRuta()">ğŸ—ºï¸ Calcular ruta real</button>

    <h3>MÃ¡s informaciÃ³n del destino</h3>
    <div class="options">
      <div class="option">ğŸ› Historia y origen</div>
      <div class="option">ğŸ½ GastronomÃ­a tÃ­pica</div>
      <div class="option">ğŸ¨ Hospedaje</div>
      <div class="option">ğŸ›‚ DocumentaciÃ³n</div>
      <div class="option">ğŸ©º Salud y seguros</div>
      <div class="option">ğŸ‰ Festividades</div>
    </div>
  </div>

</div>

<footer>
Proyecto acadÃ©mico Â· OpenStreetMap Â· MapLibre Â· OSRM Â· 100% libre
</footer>

</main>

<script>
/* MAPA 3D */
const map = new maplibregl.Map({
  container:'map',
  style:{
    version:8,
    sources:{
      osm:{
        type:'raster',
        tiles:['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],
        tileSize:256
      }
    },
    layers:[{id:'osm',type:'raster',source:'osm'}]
  },
  center:[0,20],
  zoom:2,
  pitch:60,
  bearing:-20
});
map.addControl(new maplibregl.NavigationControl());

let destino=null;
let origen=null;

const lugares=[
{
  nombre:"Cusco, PerÃº",
  coords:[-71.9675,-13.5319],
  desc:"Antigua capital del Imperio Inca, centro espiritual y cultural andino."
},
{
  nombre:"Petra, Jordania",
  coords:[35.4444,30.3285],
  desc:"Ciudad nabatea esculpida en roca, patrimonio cultural de la humanidad."
},
{
  nombre:"Kioto, JapÃ³n",
  coords:[135.7681,35.0116],
  desc:"CorazÃ³n tradicional japonÃ©s, templos, rituales y festivales."
}
];

lugares.forEach(l=>{
  const el=document.createElement("div");
  el.style.width="14px";
  el.style.height="14px";
  el.style.background="#2e7d32";
  el.style.borderRadius="50%";

  new maplibregl.Marker(el)
    .setLngLat(l.coords)
    .addTo(map)
    .getElement()
    .onclick=()=>{
      destino=l.coords;
      document.getElementById("title").innerText=l.nombre;
      document.getElementById("desc").innerText=l.desc;
      map.flyTo({center:l.coords,zoom:11,pitch:65});
    };
});

/* UBICACIÃ“N */
function usarUbicacion(){
  navigator.geolocation.getCurrentPosition(p=>{
    origen=[p.coords.longitude,p.coords.latitude];
    alert("UbicaciÃ³n detectada correctamente");
  });
}

/* RUTA REAL */
function calcularRuta(){
  if(!origen||!destino){
    alert("Selecciona ubicaciÃ³n y destino");
    return;
  }
  fetch(`https://router.project-osrm.org/route/v1/driving/${origen.join(",")};${destino.join(",")}?geometries=geojson`)
  .then(r=>r.json())
  .then(d=>{
    const g=d.routes[0].geometry;
    if(map.getSource("route")){
      map.getSource("route").setData({type:"Feature",geometry:g});
    }else{
      map.addSource("route",{type:"geojson",data:{type:"Feature",geometry:g}});
      map.addLayer({
        id:"route",
        type:"line",
        source:"route",
        paint:{'line-color':'#ff5722','line-width':5}
      });
    }
  });
}
</script>

</body>
</html>
